@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

<input type="text" id="msg" />
<button class="btn btn-primary" id="btn-msg">Gửi</button>

<div id="ws-status">

</div>

@section Scripts {
    <script>
        let schema = document.location.protocol === "https:" ? "wss" : "ws";
        let port = document.location.port ? (":" + document.location.port) : "";
        let connectionUrl = schema + "://" + document.location.hostname + port + "/ws";

        let socket = new WebSocket(connectionUrl);
        socket.onopen = function(event) {
            document.getElementById("ws-status").append("Kết nối thành công <br/>");
        }

        socket.onclose = function(event) {
            document.getElementById("ws-status").append("Đóng kết nối <br/>");
        }

        socket.onmessage = function(event) {
            document.getElementById("ws-status").append(`Message: ${event.data} <br/>`);
        }

document.getElementById("btn-msg").addEventListener("click", function() {
    let msg = document.getElementById("msg").value;
    socket.send(msg);
});

    </script>
}